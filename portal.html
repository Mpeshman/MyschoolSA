<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Imfundo Portal</title>
  <style>
    :root{--brand:#036;--muted:#f3f6f8;--card:#fff}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;margin:0;background:#f6f8fa;color:#122}
    header{background:var(--brand);color:#fff;padding:.85rem 0}
    .header-inner{max-width:1100px;margin:0 auto;padding:0 1rem;display:flex;align-items:center;justify-content:space-between}
    .logo img{width:40px;height:40px;object-fit:contain;border-radius:6px;background:#fff;padding:2px}
    .site-title{font-weight:700}
    main{max-width:1100px;margin:1.25rem auto;padding:0 1rem}
    .layout{display:grid;grid-template-columns:260px 1fr;gap:1rem}
    .card{background:var(--card);padding:1rem;border-radius:8px;box-shadow:0 1px 0 rgba(0,0,0,0.04)}
    .nav-portal{display:flex;flex-direction:column;gap:0.5rem}
    .nav-portal button{background:transparent;border:0;padding:.6rem .75rem;text-align:left;border-radius:6px;cursor:pointer}
    .nav-portal button.active{background:var(--muted)}
    .quick-actions button{background:transparent;border:1px solid rgba(0,0,0,0.06);padding:.45rem .65rem;border-radius:6px;cursor:pointer}
    .quick-actions button:hover{background:rgba(0,0,0,0.03)}
    .quick-actions button.active{background:var(--brand);color:#fff;border-color:var(--brand)}
    .login{max-width:420px;margin:1rem auto}
    label{display:block;margin-top:.6rem;font-size:.9rem}
    input{width:100%;padding:.6rem;border:1px solid #d0d4d7;border-radius:6px}
    .muted{color:#666;font-size:.9rem}
    .hidden{display:none}
    .topbar{display:flex;justify-content:space-between;align-items:center;gap:1rem}
    .welcome{font-weight:600}
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
    table{width:100%;border-collapse:collapse}
    td,th{padding:.5rem;border-bottom:1px solid #eef}
    .small{font-size:.85rem}
    @media(max-width:880px){.layout{grid-template-columns:1fr}.nav-portal{flex-direction:row;overflow:auto}}
  </style>
</head>
<style>
  /* Portal header overrides to match site styling */
  :root{--brand:#036;--muted:#f3f6f8}
  header{background:var(--brand);color:#fff}
  .header-inner{display:flex;align-items:center;justify-content:space-between;max-width:1100px;margin:0 auto;padding:0}
  .header-left{display:flex;align-items:center;gap:0.75rem;flex:0 0 auto;padding:0 1rem}
  .header-actions{display:flex;align-items:center;gap:0.5rem;flex:1 1 auto;justify-content:flex-end;flex-wrap:wrap;padding:0 1rem}
  .nav-btn{background:transparent;color:#fff;padding:0.35rem 0.5rem;border-radius:6px;text-decoration:none;display:flex;flex-direction:column;align-items:center;font-weight:600;min-width:48px}
  .nav-btn .label{font-size:0.75rem;margin-top:4px}
  .nav-btn:hover{background:rgba(255,255,255,0.06)}
</style>
<body>
  <header>
    <div class="header-inner">
      <div style="display:flex;align-items:center;gap:.6rem">
        <div class="logo"><img src="pnd.png" alt="Imfundo logo"/></div>
        <div class="site-title">Imfundo Portal</div>
      </div>
      <nav class="header-actions" role="navigation" aria-label="Main navigation" style="display:flex;gap:.5rem;align-items:center">
        <a href="index.html" class="nav-btn" aria-label="Home" style="color:#fff;text-decoration:none;font-weight:600">
          <span class="label">Home</span>
        </a>
        <a href="imfundo-school.html#admissions" class="nav-btn" aria-label="Admissions" style="color:#fff;text-decoration:none;font-weight:600">
          <span class="label">Admissions</span>
        </a>
        <a href="programs.html" class="nav-btn" aria-label="Programs" style="color:#fff;text-decoration:none;font-weight:600">
          <span class="label">Programs</span>
        </a>
        <a href="portal.html" class="nav-btn" aria-label="Portal" style="color:#fff;text-decoration:none;font-weight:600">
          <span class="label">Portal</span>
        </a>
        <a href="news.html" class="nav-btn" aria-label="News" style="color:#fff;text-decoration:none;font-weight:600">
          <span class="label">News</span>
        </a>
        <a href="contact.html" class="nav-btn" aria-label="Contact" style="color:#fff;text-decoration:none;font-weight:600">
          <span class="label">Contact</span>
        </a>
        <a href="about.html" class="nav-btn" aria-label="About" style="color:#fff;text-decoration:none;font-weight:600">
          <span class="label">About</span>
        </a>
      </nav>
    </div>
  </header>

  <main>
    <div class="card">
          <div id="signed-out">
        <h2>Sign in to your student account</h2>
        <p class="muted">Enter your details to access your dashboard, timetable and assignments.</p>
        <div class="login">
          <label for="studentId">Student ID</label>
          <input id="studentId" />
          <label for="studentName">Full name</label>
          <input id="studentName" />
          <label for="studentPass">Password</label>
          <input id="studentPass" type="password" />
          <div style="margin-top:.75rem;display:flex;gap:.5rem;align-items:center">
            <button id="signInBtn" style="background:var(--brand);color:#fff;padding:.6rem .9rem;border-radius:6px;border:0">Sign in</button>
            <button id="demoBtn" style="background:#eee;padding:.6rem .9rem;border-radius:6px;border:0">Use demo account</button>
          </div>
        </div>
      </div>

      <div id="dashboard" class="hidden">
        <div class="topbar">
          <div>
            <div class="welcome" id="welcomeName">Welcome, Student</div>
            <div class="small muted" id="studentIdDisplay">ID: â€”</div>
            <div class="quick-actions" style="margin-top:.6rem;display:flex;gap:.5rem;flex-wrap:wrap">
              <a class="quick-action" href="overview.html">Overview</a>
              <a class="quick-action" href="timetable.html">Timetable</a>
              <a class="quick-action" href="assignments.html">Assignments</a>
              <a class="quick-action" href="grades.html">Grades</a>
              <a class="quick-action" href="fees.html">Payments</a>
              <a class="quick-action" href="resources.html">Resources</a>
            </div>
          </div>
          <div style="display:flex;gap:.6rem;align-items:center">
            <button id="logout" style="background:#fff;border:1px solid #ddd;padding:.4rem .6rem;border-radius:6px;cursor:pointer">Log out</button>
          </div>
        </div>

        <div style="display:grid;grid-template-columns:260px 1fr;gap:1rem;margin-top:1rem">
          <aside class="card nav-portal">
            <a class="nav-link active" href="overview.html">Overview</a>
            <a class="nav-link" href="timetable.html">Timetable</a>
            <a class="nav-link" href="grades.html">Grades</a>
            <a class="nav-link" href="assignments.html">Assignments</a>
            <a class="nav-link" href="resources.html">Resources</a>
            <a class="nav-link" href="fees.html">Fees & Payments</a>
            <a class="nav-link" href="contact.html">Contact</a>
          </aside>

          <section>
              <div id="panel-overview" class="card panel">
                <h3>Announcements</h3>
                <p class="muted">No announcements at this time.</p>
                <h3 style="margin-top:1rem">Quick Links</h3>
                <div class="grid-2">
                  <div class="card small"><strong>Library</strong><p class="muted">No items available.</p></div>
                  <div class="card small"><strong>Support</strong><p class="muted">No contact entries available.</p></div>
                </div>
              </div>

            <div id="panel-timetable" class="card panel hidden">
              <h3>Timetable</h3>
              <p class="muted">No timetable available.</p>
            </div>

            <div id="panel-grades" class="card panel hidden">
              <h3>Grades</h3>
              <p class="muted">No grades available.</p>
            </div>

            <div id="panel-assignments" class="card panel hidden">
              <h3>Assignments</h3>
              <p class="muted">No assignments at the moment.</p>
            </div>

            <div id="panel-resources" class="card panel hidden">
              <h3>Resources</h3>
              <p class="muted">No resources available.</p>
            </div>

            <div id="panel-fees" class="card panel hidden">
              <h3>Fees & Payments</h3>
              <p class="muted">No outstanding fees.</p>
              <button style="background:var(--brand);color:#fff;padding:.5rem .75rem;border-radius:6px;border:0">Pay online</button>
            </div>

            <div id="panel-contact" class="card panel hidden">
              <h3>Contact</h3>
              <p class="muted">Please use the main site Contact page to reach the school administration.</p>
            </div>
          </section>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Simple client-side portal state
    const signedOut = document.getElementById('signed-out');
    const dashboard = document.getElementById('dashboard');
    const signInBtn = document.getElementById('signInBtn');
    const demoBtn = document.getElementById('demoBtn');
    const logoutBtn = document.getElementById('logout');

    function showDashboard(user){
      signedOut.classList.add('hidden');
      dashboard.classList.remove('hidden');
      document.getElementById('welcomeName').textContent = `Welcome, ${user.name}`;
      document.getElementById('studentIdDisplay').textContent = `ID: ${user.id}`;
      // keep in session
      sessionStorage.setItem('imfundo_student', JSON.stringify(user));
    }

    function showSignedOut(){
      signedOut.classList.remove('hidden');
      dashboard.classList.add('hidden');
      sessionStorage.removeItem('imfundo_student');
    }

    signInBtn.addEventListener('click', ()=>{
      const id = document.getElementById('studentId').value.trim();
      const name = document.getElementById('studentName').value.trim();
      const pass = document.getElementById('studentPass').value;
      if(!id || !name){ alert('Enter Student ID and name.'); return; }
      // Simulate login (no backend). In production, POST to /api/login
      showDashboard({id,name});
    });

    demoBtn.addEventListener('click', ()=>{
      showDashboard({id:'S-DEMO001', name:'Demo Student'});
    });

    logoutBtn.addEventListener('click', showSignedOut);

    // Restore session
    const saved = sessionStorage.getItem('imfundo_student');
    if(saved){
      try{ showDashboard(JSON.parse(saved)); }catch(e){ sessionStorage.removeItem('imfundo_student'); }
    }

    // Panel switching: handle sidebar links and quick-action links.
    function activatePanel(name){
      // hide all panels
      document.querySelectorAll('.panel').forEach(p=>p.classList.add('hidden'));
      const panel = document.getElementById('panel-'+name);
      if (panel) panel.classList.remove('hidden');

      // update sidebar active
      document.querySelectorAll('.nav-portal .nav-link').forEach(a=>{
        const href = (a.getAttribute('href')||'').split('/').pop().replace('.html','');
        a.classList.toggle('active', href === name);
      });

      // update quick actions active
      document.querySelectorAll('.quick-actions .quick-action').forEach(a=>{
        const href = (a.getAttribute('href')||'').split('/').pop().replace('.html','');
        a.classList.toggle('active', href === name);
      });
    }

    // attach handlers to sidebar links
    document.querySelectorAll('.nav-portal .nav-link').forEach(a=>{
      a.addEventListener('click', (e)=>{
        const href = a.getAttribute('href')||'';
        const name = href.split('/').pop().replace('.html','');
        // if this portal contains a panel with that name, prevent navigation and switch panel
        if (document.getElementById('panel-'+name)){
          e.preventDefault();
          activatePanel(name);
          history.replaceState(null,'', 'portal.html#'+name);
        }
      });
    });

    // attach handlers to quick-action links
    document.querySelectorAll('.quick-actions .quick-action').forEach(a=>{
      a.addEventListener('click', (e)=>{
        const href = a.getAttribute('href')||'';
        const name = href.split('/').pop().replace('.html','');
        if (document.getElementById('panel-'+name)){
          e.preventDefault();
          activatePanel(name);
          history.replaceState(null,'', 'portal.html#'+name);
        }
      });
    });

    // On load, check hash to open a panel
    (function(){
      const h = (location.hash||'').replace('#','');
      if (h && document.getElementById('panel-'+h)) activatePanel(h);
    })();
  </script>
</body>
</html>
